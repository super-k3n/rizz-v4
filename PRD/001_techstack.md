## 概要
Rizz アプリケーションは、ストリートナンパの実績を記録・分析するためのモバイルアプリケーションです。

本ドキュメントでは、このプロジェクトで使用する技術スタックについて詳細に説明します。実装の簡易性を重視し、Expoを活用したアプローチを採用します。

## フロントエンド

### Expo + React Native

モバイルアプリケーションの開発にはExpoフレームワークを採用します。

- **Expo SDK**: 最新の安定版（SDK 49以上）
- **メリット**:
    - 開発環境のセットアップが簡単
    - OTA（Over The Air）アップデート機能
    - ネイティブモジュールのラッピング
    - 開発からデプロイまでの統合ツール
    - Expo Goアプリを使った即時プレビュー

### UI ライブラリ

- **Expo UI キット**:
    - 簡単に使えるネイティブUIコンポーネント
- **React Native Paper**: クロスプラットフォーム対応のシンプルなUIコンポーネント
- **Expo Vector Icons**: 事前に設定済みの包括的なアイコンパック

### ナビゲーション

- **Expo Router**:
    - ファイルベースのルーティング
    - ネイティブナビゲーション統合
    - ディープリンクのサポート

### 状態管理

- **Context API + useReducer + TypeScript**:
    - 型安全な状態管理
    - Reduxより設定が少なく実装が簡単
    - 中小規模アプリケーションに最適
    - 型定義による開発支援

### グラフ・データ可視化

- **Victory Native**:
    - Expoと互換性のあるグラフライブラリ
    - シンプルなAPI
    - 基本的なチャートタイプをカバー

### フォーム管理

- **Formik + Yup + TypeScript**:
    - 型安全なフォーム管理
    - シンプルなセットアップ
    - 直感的なAPI
    - 型定義によるバリデーションの強化

## バックエンド

### Supabase

バックエンドサービスとしてSupabaseを採用します。シンプルな実装を目指します。

- **データベース**: PostgreSQL（Supabaseで自動管理）
- **認証**: Supabase Auth
    - メールアドレス/パスワード認証のみ実装（MVPフェーズ）
    - ソーシャルログインは将来的な拡張として検討
- **ストレージ**: Supabase Storage
    - プロフィール画像の保存（シンプルな実装）
- **自動生成API**:
    - Supabaseによる自動生成されたREST APIを活用

### API

- **supabase-js + TypeScript**: 型安全なクライアントライブラリ
    - 型定義による自動補完とエラー検出
    - Expoプロジェクトとの簡単な統合
    - Supabaseの型生成ツールを活用

## データベース設計

ERD図に基づいて、PostgreSQLでのテーブル構造を実装します：

1. **users テーブル**:
    - ユーザー情報管理
    - 認証情報の保存
2. **daily_records テーブル**:
    - 日々のナンパ記録を管理
    - 詳細な統計情報を保存
3. **goals テーブル**:
    - 期間別の目標を管理
    - ユーザーごとの目標を保存

## デプロイメント & CI/CD

### モバイルアプリ (Expo)

- **ビルド**: Expo EAS Build を利用
    - `eas build` コマンドでクラウドビルド
    - 複雑な環境設定不要
- **配布**:
    - iOS: App Store Connect (EAS Submit)
    - Android: Google Play Console (EAS Submit)
- **更新**: Expo Updates (OTA)
    - コードプッシュによるアプリ更新

### バックエンド (Supabase)

- **ホスティング**: Supabaseクラウド
    - 無料枠からスタート
    - スケールに応じて有料プランへ移行
- **環境**:
    - 開発環境のみで開始（シンプル化）
    - 本番環境は後で追加

## 開発環境

- **言語**: TypeScript
    - 型安全性とコード品質の向上
    - Expo対応のTSテンプレートを使用
- **パッケージマネージャー**: npm
- **バージョン管理**: Git + GitHub
- **エディタ**: Visual Studio Code
    - TypeScript拡張機能
    - Expo拡張機能

## テスト戦略

- **TypeScriptによる静的型チェック**:
    - 型検証による初期バグ防止
- **手動テスト**:
    - MVPフェーズでは手動テスト中心
- **Jest**:
    - 必要に応じて簡単なユニットテスト導入

## セキュリティ対策

- **認証**: Supabase 組み込み認証
    - JWTは自動管理
- **アクセス制御**: Supabase RLS (Row Level Security)
    - シンプルなポリシー設定

## パフォーマンス対策

- **オフライン対応**:
    - AsyncStorage による簡易キャッシュ
    - オンライン状態の確認

## 開発の優先度

4. **MVP機能の実装**
5. **基本的なUX/UIの完成**
6. **パフォーマンスとセキュリティの改善**

## 将来的な技術検討

- **プッシュ通知**: Expo Notifications
- **アナリティクス**: Expo Analytics

## まとめ

このプロジェクトでは、Expo+React NativeとSupabaseを組み合わせた、最小限のセットアップで迅速に開発できる技術スタックを採用します。TypeScriptによる型安全性を確保しながらも、実装の簡易性を重視し、必要最小限の機能から始めて段階的に拡張していくアプローチを取ります。

Expoのエコシステムを最大限に活用することで、開発効率を高めながら、TypeScriptの恩恵により高い品質のアプリケーションを構築します。型定義により開発時のエラー検出と自動補完が強化され、コードの保守性と拡張性も向上します。
